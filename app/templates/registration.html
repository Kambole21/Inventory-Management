<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Registration Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', filename='register.css')}}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
	<main class="container d-flex justify-content-center align-items-center min-vh-100">
		<div class="card shadow-sm p-4 register-card w-100" style="max-width: 600px;">
			<!-- Flash Messages -->
			{% with messages = get_flashed_messages(with_categories=true) %}
				{% if messages %}
					{% for category, message in messages %}
						<div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show" role="alert">
							{{ message }}
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
						</div>
					{% endfor %}
				{% endif %}
			{% endwith %}

			<div class="text-center mb-4">
				<legend>Sign Up</legend>
			</div>
			<form method="POST" action="{{ url_for('registration.reg') }}" id="registrationForm">
				{{ form.hidden_tag() }}
				<div class="mb-3">
					{{ form.email.label(class="form-label") }}
					{{ form.email(class="form-control", placeholder="Enter email") }}
					{% for error in form.email.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3">
					{{ form.fname.label(class="form-label") }}
					{{ form.fname(class="form-control", placeholder="Enter first name") }}
					{% for error in form.fname.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3">
					{{ form.lname.label(class="form-label") }}
					{{ form.lname(class="form-control", placeholder="Enter last name") }}
					{% for error in form.lname.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3">
					{{ form.role.label(class="form-label") }}
					{{ form.role(class="form-control", onchange="toggleStudentNumber()") }}
					{% for error in form.role.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3" id="studentNumberField" style="display: none;">
					{{ form.student_number.label(class="form-label") }}
					{{ form.student_number(class="form-control", placeholder="Enter student number") }}
					{% for error in form.student_number.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3">
					{{ form.phone_number.label(class="form-label") }}
					{{ form.phone_number(class="form-control", placeholder="Enter phone number") }}
					{% for error in form.phone_number.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3">
					{{ form.password.label(class="form-label") }}
					{{ form.password(class="form-control", placeholder="Enter password") }}
					{% for error in form.password.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="mb-3">
					{{ form.con_password.label(class="form-label") }}
					{{ form.con_password(class="form-control", placeholder="Confirm password") }}
					{% for error in form.con_password.errors %}
						<div class="text-danger">{{ error }}</div>
					{% endfor %}
				</div>
				<div class="d-grid">
					{{ form.reg_button(class="btn btn-primary") }}
				</div>
			</form>
			 <div class="mt-3">
               <a href="{{ url_for('login.log') }}" id="log">Sign In</a>
            </div>
		</div>
	</main>


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		function toggleStudentNumber() {
			const role = document.querySelector('select[name="role"]').value;
			const studentNumberField = document.getElementById('studentNumberField');
			studentNumberField.style.display = role === 'normal' ? 'block' : 'none';
		}

		// Trigger toggle on page load to set initial state
		document.addEventListener('DOMContentLoaded', toggleStudentNumber);
	</script>
</body>
</html>